<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>
        function loadImage(url) {
            return new Promise((resolve, reject) => {
                // Image - это встроенный конструктор (класс) в браузерной среде JavaScript, 
                // который предоставляет возможность создавать объекты изображений. 
                // Эти объекты изображений используются для предварительной загрузки и отображения изображений на веб-странице.

                const image = new Image();

                // image.onload - это установка обработчика события для объекта изображения image. Когда изображение успешно загружается, 
                // браузер вызывает этот обработчик события onload. В этом случае, когда изображение успешно загружено, код внутри этой функции будет выполнен.
                // resolve(image) - это вызов функции resolve, которая является одной из функций обратного вызова, переданных в конструктор Promise. 
                // Функция resolve принимает аргумент (в данном случае image - объект изображения) и разрешает (успешно завершает) Promise с этим аргументом в качестве результата. 
                // То есть, когда изображение успешно загружено, Promise будет разрешен и передаст объект изображения далее в цепочку обработчиков .then().

                // Устанавливаем обработчики событий для успешной загрузки и ошибки
                image.onload = function () {
                    resolve(image); // Разрешаем промис с объектом изображения
                };
                // image.onerror - это установка обработчика события для объекта изображения image. 
                // Когда происходит ошибка при загрузке изображения (например, изображение не существует по указанному URL), браузер вызывает этот обработчик события onerror. 
                // В этом случае, когда происходит ошибка загрузки изображения, код внутри этой функции будет выполнен.

                image.onerror = function () {
                    reject(new Error('Ошибка загрузки изображения')); // Отклоняем промис с ошибкой
                };

                // Устанавливаем URL изображения
                image.src = url;
                
                // Отрисовываем изображение на странице
                // Создаем элемент <img>
                const imgElement = document.createElement('img');

                // Устанавливаем загруженное изображение как источник для элемента <img>
                imgElement.src = image.src;

                // Добавляем элемент <img> на страницу, например, в какой-то существующий контейнер
                document.body.appendChild(imgElement);
            });
        }

        // Пример использования:
        const imageUrl = 'https://yt3.googleusercontent.com/UEn4PX73JiDMyyb3uzqKgng2U3SzyppORh7riH18Z5Qa-Ui1_td7KRjQtvWaRBeXUe2gld9j=s900-c-k-c0x00ffffff-no-rj';

        loadImage(imageUrl)
            .then((image) => {
                console.log('Изображение успешно загружено:', image);
            })
            .catch((error) => {
                console.error('Ошибка загрузки изображения:', error);
            });
    </script>
</body>

</html>