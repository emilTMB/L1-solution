<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    // Модуль для изменения окончаний слов в зависимости от падежа
    //Модуль создается в виде самовызывающейся функции (IIFE), что позволяет сохранять приватные переменные и методы внутри модуля, 
    //а также предоставлять публичный интерфейс для взаимодействия с внешним кодом.

    // Пример самовызывающейся функции (IIFE):
    // (function () {
    //   // Ваш код здесь
    // })();
    // Открывающая круглая скобка ( сразу после ключевого слова function. Это начало определения анонимной функции.
    // Закрывающая круглая скобка ) после закрывающей фигурной скобки }. Она используется для немедленного вызова функции.

    // Таким образом, код, находящийся между этими круглыми скобками, выполняется немедленно при определении функции. 
    // IIFE полезна, когда нужно создать локальную область видимости для переменных и избежать конфликтов имен с переменными из глобальной области видимости.

    let WordDeclension = (function () {
      // Функция для изменения окончаний слов
      // Здесь, внутри модуля определена функция declineWord, которая принимает два аргумента: word (слово, окончание которого нужно изменить) и 
      // number (число, на основе которого будет определен падеж и окончание).
      function declineWord(word, number) {
        // Создаем объект с падежами и соответствующими окончаниями
        let declensions = {
          nominative: {
            сообщение: 'сообщение',
            пользователь: 'пользователь',
          },
          genitive: {
            сообщение: 'сообщения',
            пользователь: 'пользователя',
          },
          plural: {
            сообщение: 'сообщений',
            пользователь: 'пользователей',
          },
        };

        // Затем, на основе переданного числа, выбирается падеж (caseKey) с помощью условий:
        // Если число оканчивается на 1 и не оканчивается на 11 (например, 1, 21, 31, 41 и т. д.), то выбирается именительный падеж (nominative).
        // Если число оканчивается на 2, 3, или 4 и не оканчивается на 12, 13, или 14 (например, 2, 3, 4, 22, 23 и т. д.), то выбирается родительный падеж (genitive).
        // В остальных случаях выбирается множественное число (plural).

        // Выбираем падеж в зависимости от числа
        let caseKey;
        if (number % 10 === 1 && number % 100 !== 11) {
          // number % 10 - это операция взятия остатка от деления числа number на 10. Она возвращает последнюю цифру числа. Например, если number равно 123, то number % 10 вернет 3.
          caseKey = 'nominative';
        } else if (number % 10 >= 2 && number % 10 <= 4 && (number % 100 < 10 || number % 100 >= 20)) {
          caseKey = 'genitive';
        } else {
          caseKey = 'plural';
        }

        // Возвращаем слово с соответствующим окончанием
        return number + ' ' + declensions[caseKey][word];
        // declensions[caseKey][word]: Это выражение, которое использует объект declensions для получения правильного окончания слова в соответствии с выбранным падежом и словом. 
        // caseKey - это переменная, которая содержит выбранный падеж (например, "nominative", "genitive" или "plural").
        // word - это слово, для которого нужно выбрать правильное окончание (например, "сообщение" или "пользователь").
        // declensions[caseKey] - это обращение к объекту declensions с использованием переменной caseKey в качестве ключа. 
        // Это позволяет выбрать соответствующий объект падежа (например, declensions["nominative"] выберет объект для именительного падежа).
        // declensions[caseKey][word] - после выбора объекта падежа, это выражение выбирает правильное окончание слова, которое соответствует заданному падежу и слову. 
        // Например, если caseKey равно "nominative" и word равно "сообщение", то это выражение вернет "сообщение" (так как "сообщение" в именительном падеже не меняется).
      }

      // Возвращаем публичные методы модуля
      return {
        decline: declineWord,
      // Эта строка объявляет метод decline внутри объекта, который будет доступен для использования внешним кодом.
      // decline: Это имя метода, который мы объявляем внутри объекта. 
      // В данном контексте это имя метода, который будет использоваться для склонения слов в зависимости от числа и выбранного падежа.
      // declineWord: Это ссылка на функцию declineWord, которая определена внутри самовызывающейся функции. Путем указания этой функции в объекте, 
      // мы делаем ее доступной извне модуля, позволяя другим частям кода вызывать эту функцию через метод decline.
      // Таким образом, после объявления этой строки, объект, возвращаемый модулем, будет иметь метод decline, 
      // который можно использовать для склонения слов на основе числа и выбранного падежа
      };
    })();

    // Примеры использования:
    console.log(WordDeclension.decline('сообщение', 112)); // "112 сообщений"
    console.log(WordDeclension.decline('сообщение', 12));  // "12 сообщений"
    console.log(WordDeclension.decline('сообщение', 1));   // "1 сообщение"
    console.log(WordDeclension.decline('пользователь', 1024)); // "1024 пользователя"
    console.log(WordDeclension.decline('пользователь', 1026)); // "1026 пользователей"
    console.log(WordDeclension.decline('пользователь', 121));  // "121 пользователь"
  </script>
</body>

</html>